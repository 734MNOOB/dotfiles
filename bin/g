#!/usr/bin/env bash

# Quick grep: rg (ripgrep), ack or grep
#
# Usage:
#   g match
#
# Usage with rg:
#   g -w match        # match only word boundaries
#   g -g '*.js' match # only .js files
#   g -tjs match      # only .js files
#   g --type js match # only .js files
#   g -Tjs match      # not .js files
#   g fast README.md --replace FAST
#
# See more:
# https://github.com/BurntSushi/ripgrep
#
# Author: Artem Sapegin, sapegin.me
# License: MIT
# https://github.com/sapegin/dotfiles
#

if command -v rg >/dev/null 2>&1; then
	function _g() {
		# See tilde/ripgreprc for default options
		rg "$@"
	}

	if (( "$#" >= 2 )) && [[ ${1:0:1} != "-" ]]; then  # More than 2 arguments and the second is not a flag
		exts=$(echo $1 | tr '+' '|'); shift
		_g -G "\.($exts)$" "$@"
	else
		_g "$@"
	fi
elif command -v ack >/dev/null 2>&1; then
	ack -ri "$@"
else
	grep -ri "$@"
fi
